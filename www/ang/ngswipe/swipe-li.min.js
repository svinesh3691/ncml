angular.module("swipeLi",[]),angular.module("swipeLi").provider("hammerRemote",function(){"use strict";var e=this;return this.globalOptions={},this.$get=["$q",function(t){var n,i,a={count:0},r={},o="__HAMMER_ID_";return r.globalOptions=e.globalOptions,r.getHammer=function(e){return a.hasOwnProperty(e)||n(e),a[e].deferred.promise},r.register=function(e,t){var r=new window.Hammer(e,t),s=o+a.count+"__";return a.count++,a.hasOwnProperty(s)||n(s),a[s].isResolved&&n(s),i(r,s),s},r.unregister=function(e){a.hasOwnProperty(e)&&delete a[e]},n=function(e){a[e]={deferred:t.defer(),isResolved:!1}},i=function(e,t){a[t].deferred.resolve(e),a[t].isResolved=!0},r}],this}),function(){for(var e=0,t=["ms","moz","webkit","o"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var n=(new Date).getTime(),i=Math.max(0,16-(n-e)),a=window.setTimeout(function(){t(n+i)},i);return e=n+i,a}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),angular.module("swipeLi").directive("swipeLi",["hammerRemote","$timeout",function(e,t){"use strict";return{restrict:"A",template:'<div class="swipe-li"><ul><li class="pane accept"><ng-include src="acceptContent"></ng-include></li><li class=""><ng-include src="mainContent"></ng-include></li><li class="pane reject"><ng-include src="rejectContent"></ng-include></div></li></li></ul></div>',link:function(n,i,a){function r(){l=o.width(),c.each(function(){$(this).width(l)}),s.width(l*u)}n.mainContent=n.$eval(a.mainContent),n.acceptContent=n.$eval(a.acceptContent),n.rejectContent=n.$eval(a.rejectContent),n.resetToContent=n.$eval(a.resetToContent),n.intent=n.$eval(a.intent),n.onComplete=function(e){t(function(){n.resetToContent&&n.showPane(1,!0),n.$apply(a[e])},300)};var o=i.find("div"),s=$(">ul",o),c=$(">ul>li",o),l=0,u=3,d=0;n.init=function(){r(),n.showPane(1,!1),$(window).on("load resize orientationchange",function(){r()})},n.showPane=function(e,t){e=Math.max(0,Math.min(e,u-1)),d=e;var i=-(100/u*d);n.setContainerOffset(i,t)},n.setContainerOffset=function(e,t){if(s.removeClass("animate"),t&&s.addClass("animate"),Modernizr.csstransforms3d)s.css("transform","translate3d("+e+"%,0,0) scale3d(1,1,1)");else if(Modernizr.csstransforms)s.css("transform","translate("+e+"%,0)");else{var n=l*u/100*e;s.css("left",n+"px")}},n.handleHammer=function(e){if(e.gesture.preventDefault(),!n.$eval(a.disabled))switch(e.type){case"dragright":case"dragleft":var t=-(100/u)*d,i=100/l*e.gesture.deltaX/u;(0==d&&"right"==e.gesture.direction||d==u-1&&"left"==e.gesture.direction)&&(i*=.4),n.setContainerOffset(i+t);break;case"swipeleft":n.showPane(2,!0),n.onComplete("reject"),e.gesture.stopDetect();break;case"swiperight":n.showPane(0,!0),n.onComplete("accept"),e.gesture.stopDetect();break;case"release":!n.intent&&Math.abs(e.gesture.deltaX)<l?n.showPane(d,!0):Math.abs(e.gesture.deltaX)>l/2?"right"==e.gesture.direction?(n.showPane(0,!0),n.onComplete("accept")):(n.showPane(2,!0),n.onComplete("reject")):n.showPane(d,!0)}},n.id=e.register(o[0],{drag_lock_to_axis:!0}),e.getHammer(n.id).then(function(e){e.on("release dragleft dragright swipeleft swiperight",n.handleHammer),n.init()}),n.$on("$destroy",function(){e.unregister(n.id)})}}}]);